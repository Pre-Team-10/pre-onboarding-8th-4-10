# API ì„œë²„ì™€ í†µì‹ í•´ì„œ ì‘ë™í•˜ëŠ” ëŒ“ê¸€ í”„ë¡œì íŠ¸ (ì„¸ì…˜ 4ì£¼ì°¨)

**ëª©ì°¨**

- [1.í”„ë¡œì íŠ¸ ì†Œê°œ](#í”„ë¡œì íŠ¸-ì†Œê°œ)
- [2.íŒ€ì› ì†Œê°œ](#íŒ€ì›-ì†Œê°œ)
- [3.êµ¬í˜„ ê¸°ëŠ¥](#êµ¬í˜„-ê¸°ëŠ¥)
- [4.í”„ë¡œì íŠ¸ í´ë” êµ¬ì¡°](#í”„ë¡œì íŠ¸-í´ë”-êµ¬ì¡°)
- [5.Best Practice ì„ ì • ì‚¬ë¡€](#Best-Practice-ì„ ì •-ì‚¬ë¡€)

## í”„ë¡œì íŠ¸ ì†Œê°œ

ê°œë°œ ê¸°ê°„: 23.01.16 ~ 23.01.19

### ë°°í¬ ë§í¬

[ë°°í¬ ë§í¬](https://pre-onboarding-8th-4-10.vercel.app)

### êµ¬ë™ ë°©ë²•

```tsx
npm install
npm start
```

### api ì„œë²„ êµ¬ë™ ë°©ë²•

```tsx
npm install
npm run api
```

### ì‚¬ìš©í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬

<div>
  <img src="https://img.shields.io/badge/redux-4B32C3?style=for-the-badge&logo=redux&logoColor=white" />
  <img src="https://img.shields.io/badge/eslint-4B32C3?style=for-the-badge&logo=eslint&logoColor=white" />
  <img src="https://img.shields.io/badge/Prettier-F7B93E?style=for-the-badge&logo=prettier&logoColor=white" />
	<img src="https://img.shields.io/badge/styled components-DB7093?style=for-the-badge&logo=styled-components&logoColor=white" />
</div>

## íŒ€ì› ì†Œê°œ

---

<table>
  <tbody>
    <tr>
      <td align="center"><a href="https://github.com/jdy8739"><img src="https://avatars.githubusercontent.com/u/83811826?v=4" width="100px;" alt=""/><br /><sub><b>FE íŒ€ì¥: ì •ë„ì˜ </b></sub></a><br /></td>
      <td align="center"><a href="https://github.com/smash009"><img src="https://avatars.githubusercontent.com/u/46629029?v=4" width="100px;" alt=""/><br /><sub><b>FE íŒ€ì›: ë‚¨ì¥í˜„</b></sub></a><br /></td>
      <td align="center"><a href="https://github.com/SkyRain1225"><img src="https://avatars.githubusercontent.com/u/97310823?v=4" width="100px;" alt=""/><br /><sub><b>FE íŒ€ì›: ì˜¤ê²½ì¤€</b></sub></a><br /></td>
      <td align="center"><a href="https://github.com/ddaisylee"><img src="https://avatars.githubusercontent.com/u/88873956?v=4" width="100px;" alt=""/><br /><sub><b>FE íŒ€ì›: ì´ì€ì§€</b></sub></a><br /></td>
      <td align="center"><a href="https://github.com/jazzyfact"><img src="https://avatars.githubusercontent.com/u/51365114?v=4" width="100px;" alt=""/><br /><sub><b>FE íŒ€ì›: ì„í˜œë¯¸</b></sub></a><br /></td>
     <tr/>
  </tbody>
</table>

## êµ¬í˜„ ê¸°ëŠ¥

---

## ğŸ“ êµ¬í˜„ ê¸°ëŠ¥ ëª©ë¡

<br>

### **ğŸ‘‹ 1. ì´ìŠˆ ëª©ë¡ ë³´ê¸°**

    - [x] ëŒ“ê¸€ ë¶ˆëŸ¬ì˜¤ê¸°, ì‘ì„±, ìˆ˜ì •, ì‚­ì œê°€ ë™ì‘í•˜ë„ë¡ ê¸°ëŠ¥ êµ¬í˜„.
    - [x] í˜ì´ì§€ë„¤ì´ì…˜ êµ¬í˜„.
    - [x] ëŒ“ê¸€ ì‘ì„±, ìˆ˜ì •, ì‚­ì œ í›„ ë™ì‘ì— ëŒ€í•œ ìš”êµ¬ì‚¬í•­ êµ¬í˜„.

<br>

- [x] ëŒ“ê¸€ ë¶ˆëŸ¬ì˜¤ê¸°, ì‘ì„±, ìˆ˜ì •, ì‚­ì œê°€ ë™ì‘í•˜ë„ë¡ ê¸°ëŠ¥ ë° ì´í›„ ë™ì‘ êµ¬í˜„ 

  - [x] ëŒ“ê¸€ ì‘ì„±í•˜ê³  ë‚œ ë’¤: ë‹¤ë¥¸ í˜ì´ì§€ì— ìœ„ì¹˜í•˜ê³  ìˆì—ˆë”ë¼ë„ 1í˜ì´ì§€ë¡œ ì´ë™, ì…ë ¥ í¼ ì´ˆê¸°í™”.
  - [x] ëŒ“ê¸€ ìˆ˜ì •í•˜ê³  ë‚œ ë’¤: í˜„ì¬ ë³´ê³ ìˆëŠ” í˜ì´ì§€ ìœ ì§€, ì…ë ¥ í¼ ì´ˆê¸°í™”.
  - [x] ì‚­ì œí•˜ê³  ë‚œ ë’¤: 1í˜ì´ì§€ë¡œ ì´ë™.

<br>

- [x] í˜ì´ì§€ë„¤ì´ì…˜ êµ¬í˜„

  - [x] ëŒ“ê¸€ ë°°ì—´ì˜ ì´ ê¸¸ì´ì— ë”°ë¥¸ êµ¬ë¶„ ë²„íŠ¼ ë° í˜ì´ì§€ë„¤ì´ì…˜ ê¸°ëŠ¥ ì œì‘.

<br>

### **ğŸ‘‹ êµ¬í˜„ ì¡°ê±´**

- [x] React, Redux ì‚¬ìš© í•„ìˆ˜.
- [x] Redux logger, Redux-Devtools ì„¤ì • í•„ìˆ˜.
- [x] Reduxë¥¼ ì´ìš©í•œ ë¹„ë™ê¸° ì²˜ë¦¬ í•„ìˆ˜.

## í”„ë¡œì íŠ¸ í´ë” êµ¬ì¡°

---

```tsx
src
 â”£ apis
 â”ƒ â”— apis.ts
 â”£ components
 â”ƒ â”£ CommentList.tsx
 â”ƒ â”£ Form.tsx
 â”ƒ â”— PageList.tsx
 â”£ const
 â”ƒ â”£ endPoints.ts
 â”ƒ â”£ errorDescs.ts
 â”ƒ â”— status.ts
 â”£ containers
 â”ƒ â”£ CommentListContainer.tsx
 â”£ store
 â”ƒ â”£ commentsSlice.tsx
 â”ƒ â”— store.ts
 â”£ styles
 â”ƒ â”— styles.ts
 â”£ types
 â”ƒ â”— types.ts
 â”£ App.tsx
 â”— index.tsx
```

### apis í´ë”

1. json serverì— CRUDìš”ì²­ì„ ìˆ˜í–‰í•˜ëŠ” ê´€ì‹¬ì‚¬ì˜ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ë“¤ì„ í•˜ë‚˜ì˜ classë¡œ êµ¬í˜„

### components í´ë”

1. ëŒ“ê¸€, í˜ì´ì§€ ë²„íŠ¼, ì…ë ¥ í¼ì„ êµ¬ì„±í•˜ëŠ” ê° ì»´í¬ë„ŒíŠ¸ë“¤ ì œì‘

### consts í´ë”

1. api ìš”ì²­ì„ ìˆ˜í–‰í•˜ëŠ” class ë‚´ë¶€ì—ì„œ ì‚¬ìš©ë˜ëŠ” url end-point, ì—ëŸ¬ ì²˜ë¦¬ ë¬¸êµ¬, ì„œë²„ ìƒíƒœë“¤ì„ as constë¥¼ ì‚¬ìš©í•´ ê° ìƒìˆ˜ ê°ì²´ë¡œ ë§Œë“¤ì–´ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì²˜ë¦¬

### containers í´ë”

1. í™”ë©´ì— ë³´ì—¬ì§ˆ ë©”ì¸ í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸ ì‘ì„±

### store í´ë”

1. ëª¨ë“  ì „ì—­ìƒíƒœë¥¼ ë³´ê´€í•˜ëŠ” storeì™€ ëª¨ë“  ëŒ“ê¸€ë“¤ì˜ ëª¨ìŒì„ í•˜ë‚˜ì˜ ì „ì—­ìƒíƒœë¡œ ì €ì¥í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” store.ts íŒŒì¼ ì œì‘
2. ì´ ëŒ“ê¸€ ëª¨ìŒì˜ ì´ˆê¸°ìƒíƒœì™€ ì´ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆëŠ” actionì´ ì •ì˜ëœ slice ê°ì²´ ë° ë¹„ë™ê¸° ë¯¸ë“¤ì›¨ì–´ í•¨ìˆ˜ë¥¼ ì„ ì–¸í•œ commentsSlice.ts íŒŒì¼ ì œì‘

### styles í´ë”

1. styled-componentsë¥¼ ì‚¬ìš©í•˜ì—¬ styled ë³€ìˆ˜ë“¤ì„ ë¶„ë¦¬í•˜ì—¬ ì‘ì„± ë° ë³´ê´€

### types í´ë”

1. ëŒ“ê¸€ ëª¨ìŒ ê°ì²´ì˜ íƒ€ì…ì´ ì„ ì–¸ëœ íŒŒì¼ ì œì‘


## Best Practice ì„ ì • ì‚¬ë¡€

---

### 1. Redux middlewareë¥¼ ì‚¬ìš©í•œ ëŒ“ê¸€ ë¶ˆëŸ¬ì˜¤ê¸°

```ts
/*
Reduxì˜ middlewareë¥¼ êµ¬í˜„í•˜ëŠ” createAsyncThunk í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ ëª¨ë“  ëŒ“ê¸€ë“¤ì„ api í˜¸ì¶œì„ í†µí•´ ë°›ì•„ì˜¤ë„ë¡ í•˜ëŠ” í•¨ìˆ˜ë¥¼ ì œì‘í•˜ê³ 
slice ê°ì²´ì˜ extraReducers ì†ì„± ë‚´ë¶€ì— ì´ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì„¤ì •í•˜ì—¬ í˜ì´ì§€ ë¡œë“œ, ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ í›„
ëŒ“ê¸€ë“¤ì„ ë¶ˆëŸ¬ì™€ í™”ë©´ì— ë°˜ì˜í•  ìˆ˜ ìˆë„ë¡ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.
*/

export const fetchAllComments = createAsyncThunk(
  END_POINTS.getComments,
  async () => {
    const fetchedAllComments = await commentApiManager.fetchAllComments();
    return fetchedAllComments;
  },
);

const initialState: Array<IComment> = [];

export const commentsSlice = createSlice({
  name: "comments",
  initialState,
  reducers: {
    addNewComment: (state, { payload: newComment }: { payload: IComment }) => {
      state.unshift(newComment);
    },
    deleteComment: (state, { payload: targetId }: { payload: number }) => {
      return state.filter((comment) => comment.id !== targetId);
    },
    modifyComment: (
      state,
      { payload: modifiedComment }: { payload: IComment },
    ) => {
      const targetCommentIndex = state.findIndex(
        (comment) => comment.id === modifiedComment.id,
      );
      state.splice(targetCommentIndex, 1, modifiedComment);
    },
  },
  extraReducers: (builder) => {
    builder.addCase(
      fetchAllComments.fulfilled,
      (state, { payload: fetchedAllComments }) => {
        if (fetchedAllComments) return fetchedAllComments;
        return [];
      },
    );
  },
});
```

- [x] Reduxë¥¼ ì´ìš©í•œ ë¹„ë™ê¸° ì²˜ë¦¬ í•„ìˆ˜.

### 2. í˜ì´ì§€ë„¤ì´ì…˜

```ts
/*
í˜„ì¬ í˜ì´ì§€ë¥¼ ì»´í¬ë„ŒíŠ¸ ìƒíƒœë¡œ ë‚˜íƒ€ë‚´ëŠ” nowPage ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ í•œ í™”ë©´ì— ë³´ì—¬ì§ˆ ëŒ“ê¸€ë“¤ì˜ ë²”ìœ„ë¥¼ ì„¤ì •í•˜ê³ 
ì´ ë²”ìœ„ëŒ€ë¡œ ì»´í¬ë„ŒíŠ¸ê°€ ëŒ“ê¸€ë“¤ì„ ë³´ì—¬ì¤„ ìˆ˜ ìˆë„ë¡ slice í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ ëŒ“ê¸€ë“¤ì˜ ë°°ì—´ì„ ì¡°ì‘í–ˆìŠµë‹ˆë‹¤.
*/

const SLICED_POINT = nowPage * NUM_OF_COMMENTS_PER_SINGLE_PAGE;
const SLICED_END = SLICED_POINT + NUM_OF_COMMENTS_PER_SINGLE_PAGE;
return (
  <CommentContainer>
    {comments.slice(SLICED_POINT, SLICED_END).map((comment) => 
      <Comment comment={comment} />})
```

```ts
/*
í˜ì´ì§€ë„¤ì´ì…˜ ë²„íŠ¼ì„ JSX ë°°ì—´ì— ë‹´ì•„ í•´ë‹¹ ë°°ì—´ì„ returnë¬¸ ë‚´ë¶€ì—ì„œ ë°˜í™˜í•˜ë„ë¡ ì œì‘ ë° í˜„ì¬ í˜ì´ì§€ì˜ ìƒíƒœê°’ê³¼ ì¼ì¹˜í•˜ëŠ”
ë²„íŠ¼ì˜ ìƒ‰ìƒì„ styled-componentsì˜ props(active)ë¥¼ í†µí•˜ì—¬ ì‹ë³„í•  ìˆ˜ ìˆë„ë¡ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.
*/

const pageArray = [];
for (let i = 0; i < numberOfPages; i += 1) {
  const page = i + 1;
  pageArray.push(
    <Page
      key={page}
      active={page === nowPage + 1}
      onClick={() => setNowPage(i)}
    >
      {page}
    </Page>,
  );
}
return <PageListStyle>{pageArray}</PageListStyle>;
```

- [x] ëŒ“ê¸€ ë°°ì—´ì˜ ì´ ê¸¸ì´ì— ë”°ë¥¸ êµ¬ë¶„ ë²„íŠ¼ ë° í˜ì´ì§€ë„¤ì´ì…˜ ê¸°ëŠ¥ ì œì‘.

### 3. ëŒ“ê¸€ CRUDìš”ì²­ì„ ìˆ˜í–‰í•˜ëŠ” ê´€ì‹¬ì‚¬ì˜ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ë“¤ì„ í•˜ë‚˜ì˜ classë¡œ êµ¬í˜„

```ts
/*
json serverì— api ìš”ì²­ì„ ìˆ˜í–‰í•œë‹¤ëŠ” í•˜ë‚˜ì˜ ê´€ì‹¬ì‚¬ë¥¼ ìˆ˜í–‰í•˜ëŠ” í•¨ìˆ˜ë“¤ì„ ì¶”ìƒí™”í•˜ì—¬ í•˜ë‚˜ì˜ interfaceë¡œ ë§Œë“¤ê³ ,
ê·¸ interfaceë¥¼ êµ¬í˜„í•˜ëŠ” classë¥¼ ì œì‘í–ˆìŠµë‹ˆë‹¤.
ì™¸ë¶€ì— ë…¸ì¶œë  í•„ìš” ì—†ëŠ” axios ê°ì²´ëŠ” private í‚¤ì›Œë“œë¥¼ ë¶™ì—¬ ìº¡ìŠí™”ë¥¼ ìˆ˜í–‰í•˜ì˜€ìœ¼ë©°,
url ì£¼ì†Œ ì—­ì‹œ class ë‚´ë¶€ì—ì„œ private, readonly í‚¤ì›Œë“œë¥¼ ë¶™ì—¬ class ë‚´ë¶€ì˜ ì‘ì§‘ë„ë¥¼ ë†’ì´ê³ ì í•˜ì˜€ìŠµë‹ˆë‹¤. 
*/

interface ICommentApiManager {
  fetchAllComments: () => Promise<Array<IComment> | null>;
  postNewComment: (newComment: IComment) => Promise<boolean>;
  deleteComment: (commentId: number) => Promise<boolean>;
  modifyComment: (newComment: IComment) => Promise<boolean>;
}

class CommentApiManager implements ICommentApiManager {
  private static readonly BASE_URL = "http://localhost:4000";

  private static commentAxios: Axios;

  constructor() {
    CommentApiManager.commentAxios = axios.create({
      baseURL: CommentApiManager.BASE_URL,
    });
  }

  private static showErrorToast(errorDesc: string) {
    toast.error(errorDesc);
  }

  async fetchAllComments() {
    try {
      const { data: fetchAllComments } =
        await CommentApiManager.commentAxios.get<IComment[]>(
          END_POINTS.getComments,
        );
      return fetchAllComments.reverse();
    } catch (e) {
      CommentApiManager.showErrorToast(ERROR_DESCS.fetchError);
      return null;
    }
  }

  async postNewComment(newComment: IComment) {
    try {
      const { status } = await CommentApiManager.commentAxios.post(
        END_POINTS.postComments,
        newComment,
      );
      if (status === SERVER_STATUS.POST_OK) return true;
      throw new Error();
    } catch (e) {
      CommentApiManager.showErrorToast(ERROR_DESCS.postError);
      return false;
    }
  }

  async deleteComment(commentId: number) {
    try {
      const { status } = await CommentApiManager.commentAxios.delete(
        `${END_POINTS.deleteComments}/${commentId}`,
      );
      if (status === SERVER_STATUS.CHANGE_OK) return true;
      throw new Error();
    } catch (e) {
      CommentApiManager.showErrorToast(ERROR_DESCS.deleteError);
      return false;
    }
  }

  async modifyComment(modifiedComment: IComment) {
    try {
      const { status } = await CommentApiManager.commentAxios.put(
        `${END_POINTS.putComments}/${modifiedComment.id}`,
        modifiedComment,
      );
      if (status === SERVER_STATUS.CHANGE_OK) return true;
      throw new Error();
    } catch (e) {
      CommentApiManager.showErrorToast(ERROR_DESCS.modifyError);
      return false;
    }
  }
}
```

- [x] ëŒ“ê¸€ ë¶ˆëŸ¬ì˜¤ê¸°, ì‘ì„±, ìˆ˜ì •, ì‚­ì œê°€ ë™ì‘í•˜ë„ë¡ ê¸°ëŠ¥ êµ¬í˜„.

### 4. ëŒ“ê¸€ ì‘ì„±, ìˆ˜ì •, ì‚­ì œ í›„ ë™ì‘ ì²˜ë¦¬

```ts
/*
í˜„ì¬ í˜ì´ì§€ì˜ ìƒíƒœë¥¼ ë³€ê²½í•˜ëŠ” setState í•¨ìˆ˜ë¥¼ í†µí•´ ëŒ“ê¸€ ì‘ì„±, ìˆ˜ì •, ì‚­ì œ ìœ ë¬´ì— ë”°ë¼ api ìš”ì²­ ì™„ë£Œ í›„
í˜ì´ì§€ ìƒíƒœì˜ ë³€ê²½ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.
ë˜í•œ, ëª¨ë“  input íƒœê·¸ì˜ ê°’ì„ ì´ˆê¸°í™”í•˜ëŠ” makeAllInputsVacant í•¨ìˆ˜ë¥¼ ì„ ì–¸í•˜ì—¬ ì´ í•¨ìˆ˜ë¥¼ api ìš”ì²­ ì¢…ë¥˜ì˜
ë¶„ê¸°ì— ë”°ë¥¸ ê° ì½”ë“œë¸”ëŸ­ì—ì„œ ì´ë¥¼ ì¬ì‚¬ìš©í•˜ì—¬ ì½”ë“œ ê¸¸ì´ë¥¼ ì¤„ì¼ ìˆ˜ ìˆë„ë¡ ì œì‘í–ˆìŠµë‹ˆë‹¤.
*/

const handleOnFormSubmit = async (e: React.FormEvent<HTMLFormElement>) => {
  e.preventDefault();
  if (isAllInputsNotNull) {
    const makeAllInputsVacant = () => {
      urlCurrent.value = "";
      authorCurrent.value = "";
      contentCurrent.value = "";
      ceatedAtCurrent.value = "";
    };
    const newComment = {
      profile_url: urlCurrent.value,
      author: authorCurrent.value,
      content: contentCurrent.value,
      createdAt: ceatedAtCurrent.value,
      id: targetComment?.id || lastCommentId + 1,
    };
    if (targetComment) {
      const isModifySuccessful = await commentApiManager.modifyComment(
        newComment,
      );
      if (isModifySuccessful) {
        makeAllInputsVacant();
        dispatch(modifyComment(newComment));
        setTargetComment(undefined);
      }
    } else {
      const isPostSuccessful = await commentApiManager.postNewComment(
        newComment,
      );
      if (isPostSuccessful) {
        makeAllInputsVacant();
        dispatch(addNewComment(newComment));
        setNowPage(0);
      }
    }
  }
};
```

- [x] ëŒ“ê¸€ ì‘ì„±í•˜ê³  ë‚œ ë’¤: ë‹¤ë¥¸ í˜ì´ì§€ì— ìœ„ì¹˜í•˜ê³  ìˆì—ˆë”ë¼ë„ 1í˜ì´ì§€ë¡œ ì´ë™, ì…ë ¥ í¼ ì´ˆê¸°í™”.
- [x] ëŒ“ê¸€ ìˆ˜ì •í•˜ê³  ë‚œ ë’¤: í˜„ì¬ ë³´ê³ ìˆëŠ” í˜ì´ì§€ ìœ ì§€, ì…ë ¥ í¼ ì´ˆê¸°í™”.
- [x] ì‚­ì œí•˜ê³  ë‚œ ë’¤: 1í˜ì´ì§€ë¡œ ì´ë™.

